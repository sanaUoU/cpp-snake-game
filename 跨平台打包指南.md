# 🌍 跨平台打包指南

## 🎯 快速开始

### 在 Mac 上（你现在的电脑）

**一键打包 Mac 版本：**
```bash
cd ~/Downloads/Documentation/SnakeGame
chmod +x build_all.sh build_mac.sh
./build_all.sh
```

这会自动生成 `SnakeGame.app` 和 `SnakeGame-Mac.zip`

---

## 🍎 Mac 详细步骤

### 环境要求
- macOS 10.15+
- Homebrew
- SFML 3.0 (`brew install sfml`)
- Xcode Command Line Tools

### 打包步骤

**方法1：一键打包（推荐）**
```bash
./build_all.sh
```

**方法2：只打包 Mac**
```bash
./build_mac.sh
```

### 输出文件
- `SnakeGame.app` - 可直接运行的应用
- `releases/mac/SnakeGame-Mac.zip` - 用于分发

### 测试
```bash
open SnakeGame.app
```

### 分发
将 `SnakeGame-Mac.zip` 发给其他 Mac 用户即可。

---

## 🪟 Windows 详细步骤

### 环境要求
- Windows 10/11
- MinGW-w64 (GCC编译器)
- SFML 3.0 for Windows

### 安装编译器

**方法1：使用 MSYS2（推荐）**

1. 下载 MSYS2: https://www.msys2.org/
2. 安装后打开 MSYS2 终端
3. 运行：
```bash
pacman -S mingw-w64-x86_64-gcc
pacman -S mingw-w64-x86_64-sfml
```

**方法2：使用 MinGW-w64**

1. 下载: https://www.mingw-w64.org/downloads/
2. 安装到 `C:\mingw64`
3. 添加到系统 PATH: `C:\mingw64\bin`

### 安装 SFML

1. 下载 SFML 3.0: https://www.sfml-dev.org/download.php
2. 选择 **GCC MinGW (SEH) - 64-bit** 版本
3. 解压到 `C:\SFML`

### 打包步骤

1. 将整个项目文件夹复制到 Windows 电脑
2. 双击运行 `build_windows.bat`
3. 等待编译完成

### 输出文件

```
releases/windows/
├── SnakeGame.exe
├── sfml-graphics-3.dll
├── sfml-window-3.dll
├── sfml-system-3.dll
├── openal32.dll
└── README.txt
```

### 测试
```cmd
cd releases\windows
SnakeGame.exe
```

### 分发
将整个 `releases\windows\` 文件夹打包成 zip 发给用户。

**重要：** 必须包含所有 .dll 文件！

---

## 🚀 完整工作流程

### 作为开发者（拥有两台电脑）

**在 Mac 上：**
```bash
# 1. 打包 Mac 版本
./build_all.sh

# 2. 将项目文件夹拷贝到 Windows
# 使用 U盘、网盘或 GitHub
```

**在 Windows 上：**
```cmd
REM 1. 确保安装了 MinGW 和 SFML
REM 2. 运行打包脚本
build_windows.bat

REM 3. 测试
cd releases\windows
SnakeGame.exe
```

**发布：**
- Mac 版本: `releases/mac/SnakeGame-Mac.zip`
- Windows 版本: 打包 `releases/windows/` 文件夹为 zip

---

## 📦 文件大小对比

| 平台 | 大小 | 包含内容 |
|------|------|---------|
| Mac .app | ~8 MB | 可执行文件 + SFML 库 |
| Mac .zip | ~3 MB | 压缩后的 .app |
| Windows | ~6 MB | .exe + DLL 文件 |

---

## 🐛 常见问题

### Mac

**Q: 提示"无法打开，因为无法验证开发者"**

A: 右键点击 → 打开 → 仍要打开

**Q: 编译失败找不到 SFML**

A: 
```bash
brew install sfml
# 或重新安装
brew reinstall sfml
```

### Windows

**Q: 双击 .exe 没反应**

A: 检查是否在同一文件夹有所有 .dll 文件

**Q: 提示缺少 DLL**

A: 确保复制了所有 SFML DLL：
- sfml-graphics-3.dll
- sfml-window-3.dll  
- sfml-system-3.dll
- openal32.dll

**Q: 编译报错找不到 SFML**

A: 检查 SFML 是否解压到 `C:\SFML`

---

## 🎁 给用户的安装说明

### Mac 用户

1. 下载 `SnakeGame-Mac.zip`
2. 解压
3. 双击 `SnakeGame.app`
4. 如果提示安全警告，右键 → 打开

### Windows 用户

1. 下载 `SnakeGame-Windows.zip`
2. 解压到任意文件夹
3. 双击 `SnakeGame.exe`

---

## 🔄 代码是否需要修改？

**不需要！** 

`main.cpp` 代码完全跨平台，使用了：
- ✅ SFML（跨平台图形库）
- ✅ C++ 标准库
- ✅ 无平台特定代码

**同一份代码在两个平台都能编译运行。**

---

## 📊 技术细节

### 为什么 Mac 用 .app？
- Mac 的应用程序标准格式
- 包含所有依赖库
- 用户体验最好（双击即用）

### 为什么 Windows 用 .exe + DLLs？
- Windows 的标准发布方式
- DLL 可以共享减小体积
- 方便更新单个组件

### 能静态链接吗？
可以，但文件会更大：
- Mac: ~15 MB
- Windows: ~12 MB

好处是只有一个文件。

---

## 🎮 源代码说明

### 要不要一起发布？

**只发可执行文件：**
- ✅ 用户下载即玩
- ❌ 不能修改

**源代码 + 可执行文件：**
- ✅ 开源透明
- ✅ 他人可学习
- ✅ 可自定义修改
- 推荐放 GitHub

---

## 💡 建议的发布结构

```
SnakeGame-Release/
├── SnakeGame-Mac.zip          (Mac 用户下载)
├── SnakeGame-Windows.zip       (Windows 用户下载)
├── Source-Code.zip             (开发者/学习者)
└── README.txt                  (说明文件)
```

---

有问题随时问！🐍
